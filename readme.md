AI Video and Music Generator API üé¨üéµThis project is a powerful FastAPI application that automatically creates a short video slideshow from a list of image URLs and adds a custom, AI-generated background music track based on a text prompt.The application leverages the transformers library to run the facebook/musicgen-small model for music generation and uses OpenCV and MoviePy for video processing, making it a complete solution for dynamic content creation.‚ú® FeaturesVideo from Images: Creates a smooth video with cross-fade transitions from a list of image URLs.AI Music Generation: Generates unique background music based on a simple text prompt (e.g., "upbeat pop music," "calm meditative sounds").Dynamic Duration Matching: The generated audio track's length is automatically matched to the video's duration.GPU Accelerated: Utilizes a CUDA-enabled GPU if available to significantly speed up the music generation process.Efficient Model Handling: The MusicGen model is loaded only once at server startup, ensuring fast API responses.Robust and Ready: Built with FastAPI for high performance and includes proper error handling.‚öôÔ∏è How It WorksAPI Request: The user sends a POST request to the /create-video-with-music endpoint with a list of image URLs and a text prompt for the music.Image Download: The server downloads all images into a temporary directory.Video Processing: The application calculates the average dimensions of the images, resizes them for consistency, and creates a silent MP4 video with cross-fade transitions.Music Generation: It then calculates the exact duration of the silent video and calls the MusicGen model to generate a .wav audio file of the same length based on the user's prompt.Audio-Video Merge: The silent video and the generated audio track are merged into a final MP4 file.API Response: The final video with music is sent back to the user as a downloadable file.üõ†Ô∏è Technology StackBackend: FastAPIWeb Server: UvicornMachine Learning: PyTorch, Transformers (Hugging Face)AI Model: facebook/musicgen-smallVideo Processing: OpenCV, MoviePyImage Handling: Pillow (PIL)üöÄ Local Setup and InstallationFollow these steps to get the application running on your local machine.PrerequisitesPython 3.8+GitAn NVIDIA GPU with CUDA installed (recommended for performance, but will fall back to CPU if not available).1. Clone the RepositoryOpen your terminal and clone the repository to your local machine.git clone [https://github.com/BALLISTICrobin/Vlog-generation-facebook-musicgen-model.git](https://github.com/BALLISTICrobin/Vlog-generation-facebook-musicgen-model.git)
cd Vlog-generation-facebook-musicgen-model
2. Create and Activate a Virtual EnvironmentIt is highly recommended to use a virtual environment to manage project dependencies.# Create the virtual environment
python -m venv venv

# Activate it (on Windows PowerShell)
.\venv\Scripts\Activate.ps1
3. Install DependenciesInstall all the required Python packages using the requirements.txt file.pip install -r requirements.txt
4. Run the ServerStart the FastAPI application using Uvicorn. The server will load the MusicGen model on startup, which may take a few moments.uvicorn process_images:app --host 0.0.0.0 --port 8000
Once the server is running, you will see a message like this in your terminal:INFO: Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)üì° API EndpointCreate Video with MusicURL: /create-video-with-musicMethod: POSTDescription: Creates a video from image URLs and adds AI-generated music.Request Body (JSON){
  "image_urls": [
    "[https://images.pexels.com/photos/3225517/pexels-photo-3225517.jpeg](https://images.pexels.com/photos/3225517/pexels-photo-3225517.jpeg)",
    "[https://images.pexels.com/photos/235621/pexels-photo-235621.jpeg](https://images.pexels.com/photos/235621/pexels-photo-235621.jpeg)",
    "[https://images.pexels.com/photos/2387418/pexels-photo-2387418.jpeg](https://images.pexels.com/photos/2387418/pexels-photo-2387418.jpeg)"
  ],
  "prompt": "epic cinematic adventure music"
}
Example Request (PowerShell)Use Invoke-RestMethod to send the request and save the output video.Invoke-RestMethod -Uri [http://127.0.0.1:8000/create-video-with-music](http://127.0.0.1:8000/create-video-with-music) `
  -Method Post `
  -ContentType 'application/json' `
  -Body '{ "image_urls": ["[https://images.pexels.com/photos/3225517/pexels-photo-3225517.jpeg](https://images.pexels.com/photos/3225517/pexels-photo-3225517.jpeg)", "[https://images.pexels.com/photos/235621/pexels-photo-235621.jpeg](https://images.pexels.com/photos/235621/pexels-photo-235621.jpeg)", "[https://images.pexels.com/photos/2387418/pexels-photo-2387418.jpeg](https://images.pexels.com/photos/2387418/pexels-photo-2387418.jpeg)"], "prompt": "epic cinematic adventure music" }' `
  -OutFile final_video.mp4
This will create a file named final_video.mp4 in your current directory.